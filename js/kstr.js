// koffee 1.4.0

/*
000   000   0000000  000000000  00000000 
000  000   000          000     000   000
0000000    0000000      000     0000000  
000  000        000     000     000   000
000   000  0000000      000     000   000
 */
var ESCAPEREGEXP, STRIPANSI, str;

str = function(o) {
    var noon;
    if (o == null) {
        return 'null';
    }
    if (typeof o === 'object') {
        if (o._str != null) {
            return o._str();
        } else {
            noon = require('noon');
            return "\n" + noon.stringify(o, {
                circular: true
            });
        }
    } else {
        return String(o);
    }
};

str.encode = function(s, spaces) {
    var entity, r, xmlEntities;
    if (spaces == null) {
        spaces = true;
    }
    entity = require('html-entities');
    xmlEntities = new entity.XmlEntities();
    if (s) {
        r = xmlEntities.encode(s);
        if (spaces) {
            r = r.replace(/\s/g, '&nbsp;');
        }
        return r;
    } else {
        return '';
    }
};

ESCAPEREGEXP = /[-\\^$*+?.()|[\]{}\/]/g;

str.escapeRegexp = function(s) {
    return s.replace(ESCAPEREGEXP, '\\$&');
};

str.lpad = function(s, l, c) {
    if (c == null) {
        c = ' ';
    }
    s = String(s);
    while (s.length < l) {
        s = c + s;
    }
    return s;
};

str.rpad = function(s, l, c) {
    if (c == null) {
        c = ' ';
    }
    s = String(s);
    while (s.length < l) {
        s += c;
    }
    return s;
};

str.detab = function(s) {
    var i;
    s = String(s);
    i = 0;
    while (i < s.length) {
        if (s[i] === '\t') {
            s = s.slice(0, i) + (str.lpad('', 4 - (i % 4))) + s.slice(i + 1);
        }
        i += 1;
    }
    return s;
};

str.time = function(t) {
    var f, j, len, ref, thsnd, u;
    if (typeof t === 'bigint') {
        thsnd = BigInt(1000);
        f = thsnd;
        ref = ['ns', 'Î¼s', 'ms', 's'];
        for (j = 0, len = ref.length; j < len; j++) {
            u = ref[j];
            if (u === 's' || t < f) {
                return '' + (thsnd * t / f) + u;
            }
            f *= thsnd;
        }
    } else {
        return String(t);
    }
};

STRIPANSI = /\x1B[[(?);]{0,2}(;?\d)*./g;

str.stripAnsi = function(s) {
    return s.replace(STRIPANSI, '');
};

str.ansi2html = function(s) {
    var Ansi;
    Ansi = require('./ansi');
    return Ansi.html(s);
};

str.ansi = require('./ansi');

module.exports = str;

//# sourceMappingURL=data:application/json;base64,eyJ2ZXJzaW9uIjozLCJmaWxlIjoia3N0ci5qcyIsInNvdXJjZVJvb3QiOiIuIiwic291cmNlcyI6WyIiXSwibmFtZXMiOltdLCJtYXBwaW5ncyI6Ijs7QUFBQTs7Ozs7OztBQUFBLElBQUE7O0FBUUEsR0FBQSxHQUFNLFNBQUMsQ0FBRDtBQUVGLFFBQUE7SUFBQSxJQUFxQixTQUFyQjtBQUFBLGVBQU8sT0FBUDs7SUFDQSxJQUFHLE9BQU8sQ0FBUCxLQUFhLFFBQWhCO1FBQ0ksSUFBRyxjQUFIO21CQUNJLENBQUMsQ0FBQyxJQUFGLENBQUEsRUFESjtTQUFBLE1BQUE7WUFHSSxJQUFBLEdBQU8sT0FBQSxDQUFRLE1BQVI7bUJBQ1AsSUFBQSxHQUFPLElBQUksQ0FBQyxTQUFMLENBQWUsQ0FBZixFQUFrQjtnQkFBQSxRQUFBLEVBQVUsSUFBVjthQUFsQixFQUpYO1NBREo7S0FBQSxNQUFBO2VBT0ksTUFBQSxDQUFPLENBQVAsRUFQSjs7QUFIRTs7QUFrQk4sR0FBRyxDQUFDLE1BQUosR0FBYSxTQUFDLENBQUQsRUFBSSxNQUFKO0FBRVQsUUFBQTs7UUFGYSxTQUFPOztJQUVwQixNQUFBLEdBQVMsT0FBQSxDQUFRLGVBQVI7SUFDVCxXQUFBLEdBQWMsSUFBSSxNQUFNLENBQUMsV0FBWCxDQUFBO0lBRWQsSUFBRyxDQUFIO1FBQ0ksQ0FBQSxHQUFJLFdBQVcsQ0FBQyxNQUFaLENBQW1CLENBQW5CO1FBQ0osSUFBRyxNQUFIO1lBQ0ksQ0FBQSxHQUFJLENBQUMsQ0FBQyxPQUFGLENBQVUsS0FBVixFQUFpQixRQUFqQixFQURSOztlQUVBLEVBSko7S0FBQSxNQUFBO2VBTUksR0FOSjs7QUFMUzs7QUFhYixZQUFBLEdBQWU7O0FBQ2YsR0FBRyxDQUFDLFlBQUosR0FBbUIsU0FBQyxDQUFEO1dBQ2YsQ0FBQyxDQUFDLE9BQUYsQ0FBVSxZQUFWLEVBQXdCLE1BQXhCO0FBRGU7O0FBU25CLEdBQUcsQ0FBQyxJQUFKLEdBQVcsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7O1FBQU8sSUFBRTs7SUFDaEIsQ0FBQSxHQUFJLE1BQUEsQ0FBTyxDQUFQO0FBQ0osV0FBTSxDQUFDLENBQUMsTUFBRixHQUFXLENBQWpCO1FBQXdCLENBQUEsR0FBSSxDQUFBLEdBQUk7SUFBaEM7V0FDQTtBQUhPOztBQUtYLEdBQUcsQ0FBQyxJQUFKLEdBQVcsU0FBQyxDQUFELEVBQUksQ0FBSixFQUFPLENBQVA7O1FBQU8sSUFBRTs7SUFDaEIsQ0FBQSxHQUFJLE1BQUEsQ0FBTyxDQUFQO0FBQ0osV0FBTSxDQUFDLENBQUMsTUFBRixHQUFXLENBQWpCO1FBQXdCLENBQUEsSUFBSztJQUE3QjtXQUNBO0FBSE87O0FBS1gsR0FBRyxDQUFDLEtBQUosR0FBWSxTQUFDLENBQUQ7QUFDUixRQUFBO0lBQUEsQ0FBQSxHQUFJLE1BQUEsQ0FBTyxDQUFQO0lBQ0osQ0FBQSxHQUFJO0FBQ0osV0FBTSxDQUFBLEdBQUksQ0FBQyxDQUFDLE1BQVo7UUFDSSxJQUFHLENBQUUsQ0FBQSxDQUFBLENBQUYsS0FBUSxJQUFYO1lBQ0ksQ0FBQSxHQUFJLENBQUUsWUFBRixHQUFVLENBQUMsR0FBRyxDQUFDLElBQUosQ0FBUyxFQUFULEVBQWEsQ0FBQSxHQUFFLENBQUMsQ0FBQSxHQUFFLENBQUgsQ0FBZixDQUFELENBQVYsR0FBbUMsQ0FBRSxjQUQ3Qzs7UUFFQSxDQUFBLElBQUs7SUFIVDtXQUlBO0FBUFE7O0FBZVosR0FBRyxDQUFDLElBQUosR0FBVyxTQUFDLENBQUQ7QUFDUCxRQUFBO0lBQUEsSUFBRyxPQUFPLENBQVAsS0FBYSxRQUFoQjtRQUNJLEtBQUEsR0FBUSxNQUFBLENBQU8sSUFBUDtRQUNSLENBQUEsR0FBSTtBQUNKO0FBQUEsYUFBQSxxQ0FBQTs7WUFDSSxJQUFHLENBQUEsS0FBSyxHQUFMLElBQVksQ0FBQSxHQUFJLENBQW5CO0FBQ0ksdUJBQU8sRUFBQSxHQUFLLENBQUMsS0FBQSxHQUFRLENBQVIsR0FBWSxDQUFiLENBQUwsR0FBdUIsRUFEbEM7O1lBRUEsQ0FBQSxJQUFLO0FBSFQsU0FISjtLQUFBLE1BQUE7ZUFRSSxNQUFBLENBQU8sQ0FBUCxFQVJKOztBQURPOztBQWlCWCxTQUFBLEdBQVk7O0FBQ1osR0FBRyxDQUFDLFNBQUosR0FBZ0IsU0FBQyxDQUFEO1dBQ1osQ0FBQyxDQUFDLE9BQUYsQ0FBVSxTQUFWLEVBQXFCLEVBQXJCO0FBRFk7O0FBR2hCLEdBQUcsQ0FBQyxTQUFKLEdBQWdCLFNBQUMsQ0FBRDtBQUNaLFFBQUE7SUFBQSxJQUFBLEdBQU8sT0FBQSxDQUFRLFFBQVI7V0FDUCxJQUFJLENBQUMsSUFBTCxDQUFVLENBQVY7QUFGWTs7QUFJaEIsR0FBRyxDQUFDLElBQUosR0FBVyxPQUFBLENBQVEsUUFBUjs7QUFFWCxNQUFNLENBQUMsT0FBUCxHQUFpQiIsInNvdXJjZXNDb250ZW50IjpbIiMjI1xuMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwMCBcbjAwMCAgMDAwICAgMDAwICAgICAgICAgIDAwMCAgICAgMDAwICAgMDAwXG4wMDAwMDAwICAgIDAwMDAwMDAgICAgICAwMDAgICAgIDAwMDAwMDAgIFxuMDAwICAwMDAgICAgICAgIDAwMCAgICAgMDAwICAgICAwMDAgICAwMDBcbjAwMCAgIDAwMCAgMDAwMDAwMCAgICAgIDAwMCAgICAgMDAwICAgMDAwXG4jIyNcblxuc3RyID0gKG8pIC0+XG4gICAgXG4gICAgcmV0dXJuICdudWxsJyBpZiBub3Qgbz9cbiAgICBpZiB0eXBlb2YobykgPT0gJ29iamVjdCdcbiAgICAgICAgaWYgby5fc3RyP1xuICAgICAgICAgICAgby5fc3RyKClcbiAgICAgICAgZWxzZVxuICAgICAgICAgICAgbm9vbiA9IHJlcXVpcmUgJ25vb24nXG4gICAgICAgICAgICBcIlxcblwiICsgbm9vbi5zdHJpbmdpZnkgbywgY2lyY3VsYXI6IHRydWVcbiAgICBlbHNlXG4gICAgICAgIFN0cmluZyBvXG5cbiMgMDAwMDAwMDAgIDAwMCAgIDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgMDAwMDAwMCAgICAwMDAwMDAwMFxuIyAwMDAgICAgICAgMDAwMCAgMDAwICAwMDAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMCAgICAgXG4jIDAwMDAwMDAgICAwMDAgMCAwMDAgIDAwMCAgICAgICAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMCBcbiMgMDAwICAgICAgIDAwMCAgMDAwMCAgMDAwICAgICAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICAwMDAgICAgIFxuIyAwMDAwMDAwMCAgMDAwICAgMDAwICAgMDAwMDAwMCAgIDAwMDAwMDAgICAwMDAwMDAwICAgIDAwMDAwMDAwXG5cbnN0ci5lbmNvZGUgPSAocywgc3BhY2VzPXRydWUpIC0+XG4gICAgXG4gICAgZW50aXR5ID0gcmVxdWlyZSAnaHRtbC1lbnRpdGllcydcbiAgICB4bWxFbnRpdGllcyA9IG5ldyBlbnRpdHkuWG1sRW50aXRpZXMoKVxuICAgIFxuICAgIGlmIHNcbiAgICAgICAgciA9IHhtbEVudGl0aWVzLmVuY29kZSBzXG4gICAgICAgIGlmIHNwYWNlc1xuICAgICAgICAgICAgciA9IHIucmVwbGFjZSAvXFxzL2csICcmbmJzcDsnXG4gICAgICAgIHJcbiAgICBlbHNlXG4gICAgICAgICcnXG4gIFxuRVNDQVBFUkVHRVhQID0gL1stXFxcXF4kKis/LigpfFtcXF17fVxcL10vZ1xuc3RyLmVzY2FwZVJlZ2V4cCA9IChzKSAtPlxuICAgIHMucmVwbGFjZSBFU0NBUEVSRUdFWFAsICdcXFxcJCYnXG4gICAgICAgICAgICAgICAgXG4jIDAwMDAwMDAwICAgIDAwMDAwMDAgICAwMDAwMDAwICAgIFxuIyAwMDAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgMDAwICBcbiMgMDAwMDAwMDAgICAwMDAwMDAwMDAgIDAwMCAgIDAwMCAgXG4jIDAwMCAgICAgICAgMDAwICAgMDAwICAwMDAgICAwMDAgIFxuIyAwMDAgICAgICAgIDAwMCAgIDAwMCAgMDAwMDAwMCAgICBcblxuc3RyLmxwYWQgPSAocywgbCwgYz0nICcpIC0+XG4gICAgcyA9IFN0cmluZyBzXG4gICAgd2hpbGUgcy5sZW5ndGggPCBsIHRoZW4gcyA9IGMgKyBzXG4gICAgc1xuXG5zdHIucnBhZCA9IChzLCBsLCBjPScgJykgLT5cbiAgICBzID0gU3RyaW5nIHNcbiAgICB3aGlsZSBzLmxlbmd0aCA8IGwgdGhlbiBzICs9IGNcbiAgICBzXG4gICAgXG5zdHIuZGV0YWIgPSAocykgLT5cbiAgICBzID0gU3RyaW5nIHNcbiAgICBpID0gMFxuICAgIHdoaWxlIGkgPCBzLmxlbmd0aFxuICAgICAgICBpZiBzW2ldID09ICdcXHQnXG4gICAgICAgICAgICBzID0gc1suLi5pXSArIChzdHIubHBhZCAnJywgNC0oaSU0KSkgKyBzW2krMS4uXVxuICAgICAgICBpICs9IDFcbiAgICBzXG4gICAgXG4jIDAwMDAwMDAwMCAgMDAwICAwMCAgICAgMDAgIDAwMDAwMDAwICBcbiMgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwICAgICAgIFxuIyAgICAwMDAgICAgIDAwMCAgMDAwMDAwMDAwICAwMDAwMDAwICAgXG4jICAgIDAwMCAgICAgMDAwICAwMDAgMCAwMDAgIDAwMCAgICAgICBcbiMgICAgMDAwICAgICAwMDAgIDAwMCAgIDAwMCAgMDAwMDAwMDAgIFxuXG5zdHIudGltZSA9ICh0KSAtPlxuICAgIGlmIHR5cGVvZih0KSA9PSAnYmlnaW50J1xuICAgICAgICB0aHNuZCA9IEJpZ0ludCAxMDAwXG4gICAgICAgIGYgPSB0aHNuZFxuICAgICAgICBmb3IgdSBpbiBbJ25zJyfOvHMnJ21zJydzJ10gXG4gICAgICAgICAgICBpZiB1ID09ICdzJyBvciB0IDwgZiBcbiAgICAgICAgICAgICAgICByZXR1cm4gJycgKyAodGhzbmQgKiB0IC8gZikgKyB1IFxuICAgICAgICAgICAgZiAqPSB0aHNuZFxuICAgIGVsc2VcbiAgICAgICAgU3RyaW5nIHRcbiAgICAgICAgXG4jICAwMDAwMDAwICAgMDAwICAgMDAwICAgMDAwMDAwMCAgMDAwICBcbiMgMDAwICAgMDAwICAwMDAwICAwMDAgIDAwMCAgICAgICAwMDAgIFxuIyAwMDAwMDAwMDAgIDAwMCAwIDAwMCAgMDAwMDAwMCAgIDAwMCAgXG4jIDAwMCAgIDAwMCAgMDAwICAwMDAwICAgICAgIDAwMCAgMDAwICBcbiMgMDAwICAgMDAwICAwMDAgICAwMDAgIDAwMDAwMDAgICAwMDAgIFxuXG5TVFJJUEFOU0kgPSAvXFx4MUJbWyg/KTtdezAsMn0oOz9cXGQpKi4vZ1xuc3RyLnN0cmlwQW5zaSA9IChzKSAtPlxuICAgIHMucmVwbGFjZSBTVFJJUEFOU0ksICcnXG4gICAgICAgIFxuc3RyLmFuc2kyaHRtbCA9IChzKSAtPlxuICAgIEFuc2kgPSByZXF1aXJlICcuL2Fuc2knXG4gICAgQW5zaS5odG1sIHNcbiAgICBcbnN0ci5hbnNpID0gcmVxdWlyZSAnLi9hbnNpJ1xuICAgICAgICBcbm1vZHVsZS5leHBvcnRzID0gc3RyXG4iXX0=
//# sourceURL=../coffee/kstr.coffee